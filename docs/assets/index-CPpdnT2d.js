var J=Object.defineProperty;var Q=(t,e,o)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var w=(t,e,o)=>(Q(t,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();class O{constructor(e,o,n,r,s,a){w(this,"name");w(this,"attributes");w(this,"content");w(this,"reference");w(this,"whenCreated");w(this,"whenDestroyed");this.name=e,this.attributes=o,this.content=n,this.reference=r,this.whenCreated=s,this.whenDestroyed=a}}const E=t=>{if(t==null)return null;if(typeof t=="string")return document.createTextNode(t);if(typeof t=="boolean"||typeof t=="number")return document.createTextNode(String(t));if(!(t instanceof O))throw new Error("virtualElement is not an instance of VirtualHTMLElement");const e="xmlns"in t.attributes&&typeof t.attributes.xmlns=="string"?document.createElementNS(t.attributes.xmlns,t.name):document.createElement(t.name);return Object.entries(t.attributes).forEach(([o,n])=>{n!=null&&(e[o]=n)}),t.content.forEach(o=>{const n=E(o);n!==null&&e.appendChild(n)}),t.reference.target=e,t.whenCreated(),e},H=t=>typeof t=="string",U=t=>typeof t=="number",W=t=>typeof t=="boolean",L=t=>t===null,M=t=>t===void 0,P=t=>t instanceof Element,$=t=>t instanceof Text,k=(t,e)=>o=>{if(L(t)||M(t)){if(L(e)||M(e))return;const n=E(e),r=P(n),s=$(n);(r||s)&&(o.appendChild(n),e instanceof O&&(e.whenCreated(),r&&(e.reference.target=n)));return}if(H(t)||U(t)||W(t)){if(Object.is(t,e))return;const n=E(e),r=P(n),s=$(n);(r||s)&&(o.replaceWith(n),e instanceof O&&(e.whenCreated(),r&&(e.reference.target=n)));return}if(L(e)||M(e)){if(L(t)||M(t))return;o.remove(),t.whenDestroyed();return}if(H(e)||U(e)||W(e)){if(Object.is(t,e))return;const n=E(e);(P(n)||$(n))&&(o.replaceWith(n),t instanceof O&&t.whenDestroyed());return}if(!(t instanceof O))throw new Error("old virtual element from previous render is not an instance of VirtualHTMLElement");if(!(e instanceof O))throw new Error("old virtual element from previous render is not an instance of VirtualHTMLElement");if(t.name!==e.name){const n=E(e),r=P(n),s=$(n);(r||s)&&(o.replaceWith(n),r&&(e.reference.target=n),t.whenDestroyed(),e.whenCreated());return}Object.entries(t.attributes).forEach(([n,r])=>{const s=e.attributes[n];if(s==null){if(!P(o))throw new Error("Tried to remove an attribute on an element that is not an instance of the Element class");o[n]=null;return}if(!Object.is(s,r)){if(!P(o))throw new Error("Tried to update an attribute on an element that is not an instance of the Element class");o[n]=s}}),Object.entries(e.attributes).forEach(([n,r])=>{const s=t.attributes[n];if(!(s!=null||r===null||r===void 0)){if(!P(o))throw new Error("Tried to add an attribute on an element that is not an instance of the Element class");o[n]=r}}),t.content.forEach((n,r)=>{if(o===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const s=e.content[r],a=o.childNodes[r],u=k(n,s);if(a===void 0)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");window.queueMicrotask(()=>{u(a)})}),e.content.slice(t.content.length).forEach(n=>{const r=k(null,n);window.queueMicrotask(()=>{r(o)})})},d=({name:t,attributes:e={},content:o=[],reference:n=void 0,whenCreated:r=()=>{},whenDestroyed:s=()=>{}})=>new O(t,e,Array.isArray(o)?o:[o],n??{target:null},r,s),N=t=>{const e=/^\/?(.*?)\/?$/.exec(t);return e?e.at(1)??t:t},v=(t,e)=>{const o=Object.entries(e),n=/^\s*\*\s*$/,r=/^\s*{\s*\w+\s*}\s*$/,s=o.find(([u])=>{const i=N(u),l=N(t),m=i.split(/\/+/),y=l.split(/\/+/);return y.length!==m.length?!1:m.every((x,C)=>{if(r.test(x))return!0;const I=y[C];return x===I})});if(s)return s;const a=o.find(([u])=>n.test(u));return a||["",()=>null]},_=(t,e)=>{const o=N(t),n=N(e),r=o.split(/\/+/),s=n.split(/\/+/),a=/^\s*{\s*\w+\s*}\s*$/;return s.length!==r.length?{}:r.every((i,l)=>{if(a.test(i))return!0;const m=s[l];return i===m})?r.reduce((i,l,m)=>{if(a.test(l))return i;const y=s[m];return y?{...i,[`${l.slice(1)}`]:y}:i},{}):{}},Z=({pages:t,root:e,initialState:o,onUpdate:n})=>{let r=o(),s;const a="arachnide:update",u=f=>{const h=f(r);h!==null&&window.dispatchEvent(new CustomEvent(a,{detail:h}))},i=f=>{const h=Object.entries(f.parameters).reduce((g,[b,R])=>g.replaceAll(`{${b}}`,String(R)),f.path),T=new URLSearchParams(Object.entries(f.searchParameters).map(([g,b])=>[g,String(b)])),S=T.size===0?h:`${h}?${T.toString()}`;window.history.pushState(null,S,S),window.dispatchEvent(new CustomEvent("popstate"))};window.addEventListener("popstate",()=>{const[f,h]=v(window.location.pathname,t),T=_(f,window.location.pathname),S=Object.fromEntries(new URLSearchParams(window.location.search)),g=h({state:r,update:u,changePage:i,parameters:T,searchParameters:S}),b=k(s,g);s=g,b(e.firstChild)}),window.addEventListener(a,({detail:f})=>{r=n({event:f,state:r});const[h,T]=v(window.location.pathname,t),S=_(h,window.location.pathname),g=Object.fromEntries(new URLSearchParams(window.location.search)),b=T({state:r,update:u,changePage:i,parameters:S,searchParameters:g}),R=k(s,b);s=b,R(e.firstChild)});const[l,m]=v(window.location.pathname,t),y=_(l,window.location.pathname),x=Object.fromEntries(new URLSearchParams(window.location.search)),C=m({state:r,update:u,changePage:i,parameters:y,searchParameters:x}),I=E(C);return s=C,I!==null&&e.appendChild(I),{update:u,changePage:i}},p=t=>d({name:"button",...t}),D=t=>d({...t,name:"div"}),X=t=>d({...t,name:"form"}),j=t=>d({...t,name:"h1"}),G=t=>d({...t,name:"input",content:[]}),Y=t=>d({...t,name:"label"}),B=t=>d({...t,name:"li"}),z=t=>d({...t,name:"p"}),V=t=>d({...t,name:"span"}),q=t=>d({...t,name:"ul"}),c=t=>{const e=Object.entries(t).filter(([,o])=>o!=null);return e.length===0?null:e.map(([o,n])=>`${o}: ${n}`).join(";")},F=t=>e=>{e.target instanceof HTMLInputElement&&(e.target.value,1)&&t(e.target.value,e)};window.addEventListener("error",t=>{alert(`Error: ${t.message}`)});const K=document.getElementById("root");if(!K)throw new Error("Root element not found");Z({root:K,initialState:()=>({counter:10,steps:10,todo:"",todos:["Do the dishes","Finish this library","Buy a new coffee mug"]}),onUpdate:({state:t,event:e})=>{switch(e.name){case"INCREMENT":return{...t,counter:t.counter+t.steps};case"DECREMENT":return t.counter-t.steps<0?{...t,counter:0}:{...t,counter:t.counter-t.steps};case"SET_STEPS":return{...t,steps:e.data};case"ADD_TODO":return{...t,todo:"",todos:[...t.todos,e.data]};case"REMOVE_TODO":return{...t,todos:t.todos.filter((n,r)=>r!==e.data)};case"SET_TODO":return{...t,todo:e.data}}},pages:{"/arachnide":({state:t,update:e,changePage:o})=>D({attributes:{class:"container"},content:[j({attributes:{class:"center",style:c({"text-align":"center"})},content:"Home"}),p({attributes:{style:c({display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"30px"}),onclick:()=>{o({path:"/arachnide/about",parameters:{},searchParameters:{}})},onload:()=>{}},content:"Go to about"}),p({attributes:{style:c({display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"30px"}),onclick:()=>{o({path:"/arachnide/summary",parameters:{},searchParameters:{}})}},content:"Go to summary"}),p({attributes:{style:c({display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"30px"}),onclick:()=>{o({path:"/arachnide/todos",parameters:{},searchParameters:{}})},onload:()=>{}},content:"Todos List"}),z({attributes:{style:c({"text-align":"center"})},content:"Get a summary of all of the below informations"}),D({attributes:{class:"grid"},content:[p({attributes:{class:"outline",onclick:()=>{e(()=>({name:"INCREMENT"}))}},content:"Increment"}),p({attributes:{class:"outline",onclick:()=>{e(()=>({name:"DECREMENT"}))}},content:"Decrement"})]}),Y({attributes:{for:"steps"},content:" Steps "}),G({attributes:{id:"steps",step:10,type:"number",value:t.steps,oninput:F(n=>{e(()=>({name:"SET_STEPS",data:Number(n)||100}))})}}),q({content:Array.from(Array(t.counter)).map((n,r)=>B({attributes:{},content:`Index #${r}`}))})]}),"/arachnide/summary":({state:t,changePage:e})=>D({attributes:{class:"container"},content:[j({attributes:{style:c({"text-align":"center"})},content:"Summary"}),z({attributes:{style:c({"text-align":"center"})},content:`Counter is currently at ${t.counter}`}),z({attributes:{style:c({"text-align":"center"})},content:`Steps is currently at ${t.steps}`}),p({attributes:{style:c({display:"block",margin:"0 auto"}),onclick:()=>{e({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]}),"/arachnide/todos":({state:t,update:e})=>D({content:[j({content:"Todos List"}),X({attributes:{style:c({display:"flex","flex-direction":"row",gap:"20px"}),onsubmit:o=>{o.preventDefault(),e(()=>({name:"ADD_TODO",data:t.todo}))}},content:[G({attributes:{style:c({width:"calc(100% - 100px)"}),type:"text",value:t.todo,oninput:F(o=>{e(()=>({name:"SET_TODO",data:o}))})}}),p({content:"Add",attributes:{style:c({width:"100px"}),type:"submit"}})]}),q({content:t.todos.map((o,n)=>B({content:[V({content:`${n+1}. ${o}`}),p({attributes:{onclick:()=>{e(()=>({name:"REMOVE_TODO",data:n}))},style:c({"margin-left":"10px"})},content:"Remove"})]}))})]}),"*":({changePage:t})=>D({content:[j({content:"Page not found"}),p({attributes:{style:c({display:"block",margin:"0 auto"}),onclick:()=>{t({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]})}});const A=document.createElement("link");A.href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css";A.rel="stylesheet";document.head.appendChild(A);
