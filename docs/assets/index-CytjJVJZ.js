var V=Object.defineProperty;var K=(e,t,o)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var w=(e,t,o)=>(K(e,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();class y{constructor(t,o,n,r,a,i){w(this,"name");w(this,"attributes");w(this,"content");w(this,"reference");w(this,"whenCreated");w(this,"whenDestroyed");this.name=t,this.attributes=o,this.content=n,this.reference=r,this.whenCreated=a,this.whenDestroyed=i}}const S=e=>{if(e==null)return null;if(typeof e=="string")return document.createTextNode(e);if(typeof e=="boolean"||typeof e=="number")return document.createTextNode(String(e));if(!(e instanceof y))throw new Error("virtualElement is not an instance of VirtualHTMLElement");const t="xmlns"in e.attributes&&typeof e.attributes.xmlns=="string"?document.createElementNS(e.attributes.xmlns,e.name):document.createElement(e.name);return Object.entries(e.attributes).forEach(([o,n])=>{if(n!=null)if(o.startsWith("on")){const r=o.slice(2);typeof n=="function"&&t.addEventListener(r,n)}else t.setAttribute(o,String(n))}),e.content.forEach(o=>{const n=S(o);n!==null&&t.appendChild(n)}),e.reference.target=t,e.whenCreated(),t},U=e=>typeof e=="string",G=e=>typeof e=="number",_=e=>typeof e=="boolean",T=e=>e===null,$=e=>e===void 0,b=e=>e instanceof Element,j=e=>e instanceof Text,M=(e,t)=>o=>{if(T(e)||$(e)){if(T(t)||$(t))return;const n=S(t),r=b(n),a=j(n);(r||a)&&(o.appendChild(n),t instanceof y&&(t.whenCreated(),r&&(t.reference.target=n)))}else if(U(e)||G(e)||_(e)){if(Object.is(e,t))return;const n=S(t),r=b(n),a=j(n);(r||a)&&(o.replaceWith(n),t instanceof y&&(t.whenCreated(),r&&(t.reference.target=n)))}else{if(T(t)||$(t))return T(e)||$(e)?void 0:(o.remove(),void e.whenDestroyed());if(U(t)||G(t)||_(t)){if(Object.is(e,t))return;const n=S(t);(b(n)||j(n))&&(o.replaceWith(n),e instanceof y&&e.whenDestroyed())}else{if(!(e instanceof y))throw new Error("old virtual element from previous render is not an instance of VirtualHTMLElement");if(!(t instanceof y))throw new Error("old virtual element from previous render is not an instance of VirtualHTMLElement");if(e.name===t.name)Object.entries(e.attributes).forEach(([n,r])=>{const a=t.attributes[n];if(a!=null){if(!Object.is(a,r)){if(!b(o))throw new Error("Tried to update an attribute on an element that is not an instance of the Element class");if(n.startsWith("on")){const i=n.slice(2);return typeof r=="function"&&o.removeEventListener(i,r),void(typeof a=="function"&&o.addEventListener(i,a))}o.setAttribute(n,String(a))}}else{if(!b(o))throw new Error("Tried to remove an attribute on an element that is not an instance of the Element class");if(n.startsWith("on")){const i=n.slice(2);return void(typeof r=="function"&&o.removeEventListener(i,r))}o.removeAttribute(n)}}),Object.entries(t.attributes).forEach(([n,r])=>{if(e.attributes[n]==null&&r!=null){if(!b(o))throw new Error("Tried to add an attribute on an element that is not an instance of the Element class");if(n.startsWith("on")){const i=n.slice(2);typeof r=="function"&&o.addEventListener(i,r)}else o.setAttribute(n,String(r))}}),e.content.forEach((n,r)=>{if(o===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const a=t.content[r],i=o.childNodes[r],s=M(n,a);if(i===void 0)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");window.queueMicrotask(()=>{s(i)})}),t.content.slice(e.content.length).forEach(n=>{const r=M(null,n);window.queueMicrotask(()=>{r(o)})});else{const n=S(t),r=b(n),a=j(n);(r||a)&&(o.replaceWith(n),r&&(t.reference.target=n),e.whenDestroyed(),t.whenCreated())}}}},f=({name:e,attributes:t={},content:o=[],reference:n,whenCreated:r=()=>{},whenDestroyed:a=()=>{}})=>new y(e,t,Array.isArray(o)?o:[o],n!=null?n:{target:null},r,a),N=e=>{var o;const t=/^\/?(.*?)\/?$/.exec(e);return t&&(o=t.at(1))!=null?o:e},A=(e,t)=>{const o=Object.entries(t),n=/^\s*\*\s*$/,r=/^\s*{\s*\w+\s*}\s*$/,a=o.find(([s])=>{const c=N(s),O=N(e),p=c.split(/\/+/),C=O.split(/\/+/);return C.length===p.length&&p.every((P,L)=>r.test(P)?!0:P===C[L])});return a||o.find(([s])=>n.test(s))||["",()=>null]},k=(e,t)=>{const o=N(e),n=N(t),r=o.split(/\/+/),a=n.split(/\/+/),i=/^\s*{\s*\w+\s*}\s*$/;return a.length!==r.length?{}:r.every((s,c)=>i.test(s)?!0:s===a[c])?r.reduce((s,c,O)=>{if(i.test(c))return s;const p=a[O];return p?{...s,["".concat(c.slice(1))]:p}:s},{}):{}},z=({pages:e,root:t,initialState:o,onUpdate:n})=>{let r,a=o();const i="arachnide:update",s=l=>{const u=l(a);u!==null&&window.dispatchEvent(new CustomEvent(i,{detail:u}))},c=l=>{const u=Object.entries(l.parameters).reduce((d,[h,D])=>d.replaceAll("{".concat(h,"}"),String(D)),l.path),E=new URLSearchParams(Object.entries(l.searchParameters).map(([d,h])=>[d,String(h)])),g=E.size===0?u:"".concat(u,"?").concat(E.toString());window.history.pushState(null,g,g),window.dispatchEvent(new CustomEvent("popstate"))};window.addEventListener("popstate",()=>{const[l,u]=A(window.location.pathname,e),E=k(l,window.location.pathname),g=Object.fromEntries(new URLSearchParams(window.location.search)),d=u({state:a,update:s,changePage:c,parameters:E,searchParameters:g}),h=M(r,d);r=d,h(t.firstChild)}),window.addEventListener(i,({detail:l})=>{a=n({event:l,state:a});const[u,E]=A(window.location.pathname,e),g=k(u,window.location.pathname),d=Object.fromEntries(new URLSearchParams(window.location.search)),h=E({state:a,update:s,changePage:c,parameters:g,searchParameters:d}),D=M(r,h);r=h,D(t.firstChild)});const[O,p]=A(window.location.pathname,e),C=k(O,window.location.pathname),P=Object.fromEntries(new URLSearchParams(window.location.search)),L=p({state:a,update:s,changePage:c,parameters:C,searchParameters:P}),H=S(L);return r=L,H!==null&&t.appendChild(H),{update:s,changePage:c}},v=e=>f({name:"button",...e}),x=e=>f({...e,name:"div"}),R=e=>f({...e,name:"h1"}),B=e=>f({...e,name:"input",content:[]}),F=e=>f({...e,name:"label"}),Z=e=>f({...e,name:"li"}),I=e=>f({...e,name:"p"}),J=e=>f({...e,name:"ul"}),m=e=>{const t=Object.entries(e).filter(([,o])=>o!=null);return t.length===0?null:t.map(([o,n])=>"".concat(o,": ").concat(n)).join(";")},Q=e=>t=>{t.target instanceof HTMLInputElement&&(t.target.value,1)&&e(t.target.value,t)};window.addEventListener("error",e=>{alert("Error: ".concat(e.message))});const q=document.getElementById("root");if(!q)throw new Error("Root element not found");z({root:q,initialState:()=>({counter:10,steps:10}),onUpdate:({state:e,event:t})=>t.name==="INCREMENT"?{...e,counter:e.counter+e.steps}:t.name==="DECREMENT"?e.counter-e.steps<0?{...e,counter:0}:{...e,counter:e.counter-e.steps}:t.name==="SET_STEPS"?{...e,steps:t.data}:e,pages:{"/arachnide":({state:e,update:t,changePage:o})=>x({attributes:{class:"container"},content:[R({attributes:{class:"center",style:m({"text-align":"center"})},content:"Home"}),v({attributes:{style:m({display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"30px"}),onclick:()=>{o({path:"/arachnide/about",parameters:{},searchParameters:{}})}},content:"Go to about"}),v({attributes:{style:m({display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"30px"}),onclick:()=>{o({path:"/arachnide/summary",parameters:{},searchParameters:{}})}},content:"Go to summary"}),I({attributes:{style:m({"text-align":"center"})},content:"Get a summary of all of the below informations"}),x({attributes:{class:"grid"},content:[v({attributes:{class:"outline",onclick:()=>{t(()=>({name:"INCREMENT"}))}},content:"Increment"}),v({attributes:{class:"outline",onclick:()=>{t(()=>({name:"DECREMENT"}))}},content:"Decrement"})]}),F({attributes:{for:"steps"},content:" Steps "}),B({attributes:{id:"steps",step:10,type:"number",value:e.steps,oninput:Q(n=>{t(()=>({name:"SET_STEPS",data:Number(n)||100}))})}}),J({content:Array.from(Array(e.counter)).map((n,r)=>Z({attributes:{},content:"Index #".concat(r)}))})]}),"/arachnide/summary":({state:e,changePage:t})=>x({attributes:{class:"container"},content:[R({attributes:{style:m({"text-align":"center"})},content:"Summary"}),I({attributes:{style:m({"text-align":"center"})},content:"Counter is currently at ".concat(e.counter)}),I({attributes:{style:m({"text-align":"center"})},content:"Steps is currently at ".concat(e.steps)}),v({attributes:{style:m({display:"block",margin:"0 auto"}),onclick:()=>{t({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]}),"*":({changePage:e})=>x({content:[R({content:"Page not found"}),v({attributes:{style:m({display:"block",margin:"0 auto"}),onclick:()=>{e({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]})}});const W=document.createElement("link");W.href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css";W.rel="stylesheet";document.head.appendChild(W);
