(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const y=e=>{if(e==null)return null;if(typeof e=="string")return document.createTextNode(e);if(typeof e=="boolean"||typeof e=="number")return document.createTextNode(String(e));const t=document.createElement(e.name);return Object.entries(e.attributes).forEach(([r,o])=>{o!=null&&(t[r]=o)}),e.content.forEach(r=>{const o=y(r);o!==null&&t.appendChild(o)}),e.reference.target=t,e.whenCreated(),t},j=e=>typeof e=="string",L=e=>typeof e=="number",T=e=>typeof e=="boolean",g=e=>e===null,E=e=>e===void 0,S=e=>e instanceof Element,O=e=>!(g(e)||E(e)||j(e)||L(e)||T(e)),D=(e,t)=>r=>{var o;if(g(e)||E(e)){if(g(t)||E(t))return;if(r===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const n=y(t);return n===null?void 0:(r.appendChild(n),void(O(t)&&(t.whenCreated(),S(n)&&O(t)&&(t.reference.target=n))))}if(j(e)||L(e)||T(e)){if(Object.is(e,t))return;if(r===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const n=y(t);return n===null?void 0:(r.replaceWith(n),void(O(t)&&(t.whenCreated(),S(n)&&(t.reference.target=n))))}if(g(t)||E(t)){if(g(e)||E(e))return;if(r===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");return r.remove(),void e.whenDestroyed()}if(j(t)||L(t)||T(t)){if(Object.is(e,t))return;if(r===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const n=y(t);return n===null?void 0:(r.replaceWith(n),void(O(e)&&e.whenDestroyed()))}if(e.name!==t.name){if(r===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const n=y(t);return n===null?void 0:(r.replaceWith(n),S(n)&&(t.reference.target=n),e.whenDestroyed(),void t.whenCreated())}Object.entries(e.attributes).forEach(([n,a])=>{var s;const i=((s=t==null?void 0:t.attributes)!=null?s:{})[n];i!=null?i!==a&&(r[n]=i):r[n]=null}),Object.entries(t.attributes).forEach(([n,a])=>{e.attributes[n]==null&&a!=null&&(r[n]=a)}),e.content.forEach((n,a)=>{if(r===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const i=t.content[a],s=r.childNodes[a],l=D(n,i);if(s===void 0)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");window.queueMicrotask(()=>{l(s)})}),t.content.slice(((o=e==null?void 0:e.content)!=null?o:[]).length).forEach(n=>{const a=D(null,n);window.queueMicrotask(()=>{a(r)})})},M=e=>{var r;const t=/^\/?(.*?)\/?$/.exec(e);return t&&(r=t.at(1))!=null?r:e},C=(e,t)=>Object.entries(t).find(([o])=>{const n=M(o),a=M(e),i=n.split(/\/+/),s=a.split(/\/+/);return s.length===i.length&&i.every((l,w)=>l.startsWith(":")?!0:l===s[w])})||["",()=>null],N=(e,t)=>{const r=M(e),o=M(t),n=r.split(/\/+/),a=o.split(/\/+/);return a.length!==n.length?{}:n.every((i,s)=>i.startsWith(":")?!0:i===a[s])?n.reduce((i,s,l)=>{if(!s.startsWith(":"))return i;const w=a[l];return w?{...i,["".concat(s.slice(1))]:w}:i},{}):{}},_=({views:e,root:t,initialState:r,onUpdate:o})=>{let n,a=r();const i="arachnide:update",s=c=>{const u=c(a);u!==null&&window.dispatchEvent(new CustomEvent(i,{detail:u}))},l=c=>{const u=Object.entries(c.parameters).reduce((d,[m,P])=>d.replaceAll(":".concat(m),String(P)),c.path),b=new URLSearchParams(Object.entries(c.searchParameters).map(([d,m])=>[d,String(m)])),h=b.size===0?u:"".concat(u,"?").concat(b.toString());console.log({targetPathWithQuery:h}),window.history.pushState(null,h,h),window.dispatchEvent(new CustomEvent("popstate"))};window.addEventListener("popstate",()=>{const[c,u]=C(window.location.pathname,e),b=N(c,window.location.pathname),h=Object.fromEntries(new URLSearchParams(window.location.search)),d=u({state:a,update:s,changePage:l,parameters:b,searchParameters:h}),m=D(n,d);n=d,m(t.firstChild)}),window.addEventListener(i,({detail:c})=>{a=o({event:c,state:a});const[u,b]=C(window.location.pathname,e),h=N(u,window.location.pathname),d=Object.fromEntries(new URLSearchParams(window.location.search)),m=b({state:a,update:s,changePage:l,parameters:h,searchParameters:d}),P=D(n,m);n=m,P(t.firstChild)});const[w,A]=C(window.location.pathname,e),U=N(w,window.location.pathname),k=Object.fromEntries(new URLSearchParams(window.location.search)),x=A({state:a,update:s,changePage:l,parameters:U,searchParameters:k}),R=y(x);return n=x,R!==null&&t.appendChild(R),{update:s,changePage:l}},f=({name:e,attributes:t={},content:r=[],reference:o,whenCreated:n=()=>{},whenDestroyed:a=()=>{}})=>({name:e,attributes:t,content:Array.isArray(r)?r:[r],reference:o!=null?o:{target:null},whenCreated:n,whenDestroyed:a}),v=e=>f({name:"button",...e}),$=e=>f({...e,name:"div"}),H=e=>f({...e,name:"h1"}),q=e=>f({...e,name:"input",content:[]}),G=e=>f({...e,name:"label"}),K=e=>f({...e,name:"li"}),I=e=>f({...e,name:"p"}),z=e=>f({...e,name:"ul"}),p=e=>{const t=Object.entries(e).filter(([,r])=>r!=null);return t.length===0?null:t.map(([r,o])=>"".concat(r,": ").concat(o)).join(";")},B=e=>t=>{t.target instanceof HTMLInputElement&&(t.target.value,1)&&e(t.target.value,t)};window.addEventListener("error",e=>{alert("Error: ".concat(e.message))});const W=document.getElementById("root");if(!W)throw new Error("Root element not found");_({root:W,initialState:()=>({counter:10,steps:10}),onUpdate:({state:e,event:t})=>t.name==="INCREMENT"?{...e,counter:e.counter+e.steps}:t.name==="DECREMENT"?e.counter-e.steps<0?{...e,counter:0}:{...e,counter:e.counter-e.steps}:t.name==="SET_STEPS"?{...e,steps:t.data}:e,views:{"/arachnide":({state:e,update:t,changePage:r})=>$({attributes:{className:"container"},content:[H({attributes:{className:"center",style:p({"text-align":"center"})},content:"Home"}),v({attributes:{style:p({display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"30px"}),onclick:()=>{r({path:"/arachnide/summary",parameters:{},searchParameters:{}})}},content:"Go to summary"}),I({attributes:{style:p({"text-align":"center"})},content:"Get a summary of all of the below informations"}),$({attributes:{className:"grid"},content:[v({attributes:{className:"outline",onclick:()=>{t(()=>({name:"INCREMENT"}))}},content:"Increment"}),v({attributes:{className:"outline",onclick:()=>{t(()=>({name:"DECREMENT"}))}},content:"Decrement"})]}),G({attributes:{for:"steps"},content:" Steps "}),q({attributes:{id:"steps",step:10,type:"number",value:e.steps,oninput:B(o=>{t(()=>({name:"SET_STEPS",data:Number(o)||100}))})}}),z({content:Array.from(Array(e.counter)).map((o,n)=>K({attributes:{},content:"Index #".concat(n)}))})]}),"/arachnide/summary":({state:e,changePage:t})=>$({attributes:{className:"container"},content:[H({attributes:{style:p({"text-align":"center"})},content:"Summary"}),I({attributes:{style:p({"text-align":"center"})},content:"Counter is currently at ".concat(e.counter)}),I({attributes:{style:p({"text-align":"center"})},content:"Steps is currently at ".concat(e.steps)}),v({attributes:{style:p({display:"block",margin:"0 auto"}),onclick:()=>{t({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]})}});
