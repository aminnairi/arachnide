var K=Object.defineProperty;var Q=(e,t,o)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var b=(e,t,o)=>Q(e,typeof t!="symbol"?t+"":t,o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();class S{constructor(t,o,n,r,s,c){b(this,"name");b(this,"attributes");b(this,"content");b(this,"reference");b(this,"whenCreated");b(this,"whenDestroyed");this.name=t,this.attributes=o,this.content=n,this.reference=r,this.whenCreated=s,this.whenDestroyed=c}}const C=e=>{if(e==null)return null;if(typeof e=="string")return document.createTextNode(e);if(typeof e=="boolean"||typeof e=="number")return document.createTextNode(String(e));if(!(e instanceof S))throw new Error("virtualElement is not an instance of VirtualHTMLElement");const t="xmlns"in e.attributes&&typeof e.attributes.xmlns=="string"?document.createElementNS(e.attributes.xmlns,e.name):document.createElement(e.name);return Object.entries(e.attributes).forEach(([o,n])=>{n!=null&&(t[o]=n)}),e.content.forEach(o=>{const n=C(o);n!==null&&t.appendChild(n)}),e.reference.target=t,e.whenCreated(),t},H=e=>typeof e=="string",Y=e=>typeof e=="number",U=e=>typeof e=="boolean",D=e=>e===null,x=e=>e===void 0,O=e=>e instanceof Element,k=e=>e instanceof Text,$=(e,t)=>o=>{if(D(e)||x(e)){if(D(t)||x(t))return;const n=C(t),r=O(n),s=k(n);(r||s)&&(o.appendChild(n),t instanceof S&&(t.whenCreated(),r&&(t.reference.target=n)));return}if(H(e)||Y(e)||U(e)){if(Object.is(e,t))return;const n=C(t),r=O(n),s=k(n);(r||s)&&(o.replaceWith(n),t instanceof S&&(t.whenCreated(),r&&(t.reference.target=n)));return}if(D(t)||x(t)){if(D(e)||x(e))return;o.remove(),e.whenDestroyed();return}if(H(t)||Y(t)||U(t)){if(Object.is(e,t))return;const n=C(t);(O(n)||k(n))&&(o.replaceWith(n),e instanceof S&&e.whenDestroyed());return}if(!(e instanceof S))throw new Error("old virtual element from previous render is not an instance of VirtualHTMLElement");if(!(t instanceof S))throw new Error("old virtual element from previous render is not an instance of VirtualHTMLElement");if(e.name!==t.name){const n=C(t),r=O(n),s=k(n);(r||s)&&(o.replaceWith(n),r&&(t.reference.target=n),e.whenDestroyed(),t.whenCreated());return}Object.entries(e.attributes).forEach(([n,r])=>{const s=t.attributes[n];if(s==null){if(!O(o))throw new Error("Tried to remove an attribute on an element that is not an instance of the Element class");o[n]=null;return}if(!Object.is(s,r)){if(!O(o))throw new Error("Tried to update an attribute on an element that is not an instance of the Element class");o[n]=s}}),Object.entries(t.attributes).forEach(([n,r])=>{const s=e.attributes[n];if(!(s!=null||r===null||r===void 0)){if(!O(o))throw new Error("Tried to add an attribute on an element that is not an instance of the Element class");o[n]=r}}),e.content.forEach((n,r)=>{if(o===null)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");const s=t.content[r],c=o.childNodes[r],m=$(n,s);if(c===void 0)throw new Error("Invalid DOM node found. Has the DOM been manually updated?");window.queueMicrotask(()=>{m(c)})}),t.content.slice(e.content.length).forEach(n=>{const r=$(null,n);window.queueMicrotask(()=>{r(o)})})},d=({name:e,attributes:t={},content:o=[],reference:n=void 0,whenCreated:r=()=>{},whenDestroyed:s=()=>{}})=>new S(e,t,Array.isArray(o)?o:[o],n??{target:null},r,s),N=e=>{const t=/^\/?(.*?)\/?$/.exec(e);return t?t.at(1)??e:e},G=(e,t)=>{const o=Object.entries(t),n=/^\s*\*\s*$/,r=/^\s*{\s*\w+\s*}\s*$/,s=o.find(([m])=>{const u=N(m),h=N(e),l=u.split(/\/+/),g=h.split(/\/+/);return g.length!==l.length?!1:l.every((M,I)=>{if(r.test(M))return!0;const R=g[I];return M===R})});if(s)return s;const c=o.find(([m])=>n.test(m));return c||["",()=>null]},B=(e,t)=>{const o=N(e),n=N(t),r=o.split(/\/+/),s=n.split(/\/+/),c=/^\s*{\s*\w+\s*}\s*$/;return s.length!==r.length?{}:r.every((u,h)=>{if(c.test(u))return!0;const l=s[h];return u===l})?r.reduce((u,h,l)=>{if(c.test(h))return u;const g=s[l];return g?{...u,[`${h.slice(1)}`]:g}:u},{}):{}},Z=({pages:e,root:t,initialState:o,onUpdate:n})=>{let r=o(),s;const c="arachnide:update",m=p=>{const f=p(r);f!==null&&window.dispatchEvent(new CustomEvent(c,{detail:f}))},u=p=>{const f=Object.entries(p.parameters).reduce((y,[E,j])=>y.replaceAll(`{${E}}`,String(j)),p.path),w=new URLSearchParams(Object.entries(p.searchParameters).map(([y,E])=>[y,String(E)])),_=w.size===0?f:`${f}?${w.toString()}`;window.history.pushState(null,_,_),window.dispatchEvent(new CustomEvent("popstate"))};window.addEventListener("popstate",()=>{const[p,f]=G(window.location.pathname,e),w=B(p,window.location.pathname),_=Object.fromEntries(new URLSearchParams(window.location.search)),y=f({state:r,update:m,changePage:u,parameters:w,searchParameters:_}),E=$(s,y);s=y,E(t.firstChild)}),window.addEventListener(c,({detail:p})=>{r=n({event:p,state:r});const[f,w]=G(window.location.pathname,e),_=B(f,window.location.pathname),y=Object.fromEntries(new URLSearchParams(window.location.search)),E=w({state:r,update:m,changePage:u,parameters:_,searchParameters:y}),j=$(s,E);s=E,j(t.firstChild)});const[h,l]=G(window.location.pathname,e),g=B(h,window.location.pathname),M=Object.fromEntries(new URLSearchParams(window.location.search)),I=l({state:r,update:m,changePage:u,parameters:g,searchParameters:M}),R=C(I);return s=I,R!==null&&t.appendChild(R),{update:m,changePage:u}},X=e=>d({...e,name:"code"}),P=e=>d({...e,name:"div"}),V=e=>d({...e,name:"form"}),A=e=>d({...e,name:"h1"}),W=e=>d({...e,name:"li"}),z=e=>d({...e,name:"p"}),ee=e=>d({...e,name:"pre"}),F=e=>d({...e,name:"section"}),te=e=>d({...e,name:"span"}),q=e=>d({...e,name:"ul"}),a=e=>{const t=Object.entries(e).filter(([,o])=>o!=null);return t.length===0?null:t.map(([o,n])=>`${o.split(/(?=[A-Z])/g).map(s=>s.toLowerCase()).join("-")}: ${n}`).join(";")},L=e=>t=>{t.target instanceof HTMLInputElement&&(t.target.value,1)&&e(t.target.value,t)},i=({content:e,attributes:t})=>{const o=a({backgroundColor:"black",padding:"5px 10px",margin:"5px",fontFamily:"sans-serif",color:"white",borderRadius:"5px",border:"none",cursor:"pointer"});return d({name:"button",content:e,attributes:{...t,style:o??""+(t==null?void 0:t.style)??""}})},T=({content:e,attributes:t})=>{const o=a({borderRadius:"5px",padding:"5px 10px",margin:"5px",fontFamily:"sans-serif",color:"black",display:"block",width:"100%",border:"1px solid grey"});return d({name:"input",attributes:{...t,style:o??""+(t==null?void 0:t.style)??""},content:e})},v=({content:e,attributes:t})=>{const o=a({fontFamily:"sans-serif",color:"black",padding:"5px"});return d({name:"label",content:e,attributes:{...t,style:o??""+(t==null?void 0:t.style)??""}})};window.addEventListener("error",e=>{alert(`Error: ${e.message}`)});const J=document.getElementById("root");if(!J)throw new Error("Root element not found");Z({root:J,initialState:()=>({counter:10,steps:10,todo:"",todos:["Do the dishes","Finish this library","Buy a new coffee mug"],compose:{services:[]}}),onUpdate:({state:e,event:t})=>{switch(t.name){case"INCREMENT":return{...e,counter:e.counter+e.steps};case"DECREMENT":return e.counter-e.steps<0?{...e,counter:0}:{...e,counter:e.counter-e.steps};case"SET_STEPS":return{...e,steps:t.data};case"TODOS_ADD":return{...e,todo:"",todos:[...e.todos,t.data]};case"TODOS_REMOVE":return{...e,todos:e.todos.filter((n,r)=>r!==t.data)};case"TODO_SET":return{...e,todo:t.data};case"COMPOSE_SERVICE_ADD":return{...e,compose:{...e.compose,services:[...e.compose.services,{name:""}]}};case"COMPOSE_SERVICE_NAME_SET":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,name:t.data.name})}};case"COMPOSE_SERVICE_IMAGE_ADD":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,image:""})}};case"COMPOSE_SERVICE_IMAGE_REMOVE":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,image:void 0})}};case"COMPOSE_SERVICE_IMAGE_SET":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,image:t.data.image})}};case"COMPOSE_SERVICE_TTY_ADD":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,tty:!0})}};case"COMPOSE_SERVICE_TTY_TOGGLE":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,tty:!n.tty})}};case"COMPOSE_SERVICE_TTY_REMOVE":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,tty:void 0})}};case"COMPOSE_SERVICE_STDIN_OPEN_TOGGLE":return{...e,compose:{...e.compose,services:e.compose.services.map((n,r)=>r!==t.data.index?n:{...n,stdinOpen:!n.stdinOpen})}}}},pages:{"/arachnide":({state:e,update:t,changePage:o})=>P({attributes:{class:"container"},content:[A({attributes:{class:"center",style:a({textAlign:"center"})},content:"Home"}),i({attributes:{style:a({display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"30px"}),onclick:()=>{o({path:"/arachnide/about",parameters:{},searchParameters:{}})},onload:()=>{}},content:"Go to about"}),i({attributes:{style:a({display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"30px"}),onclick:()=>{o({path:"/arachnide/summary",parameters:{},searchParameters:{}})}},content:"Go to summary"}),i({attributes:{style:a({display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"30px"}),onclick:()=>{o({path:"/arachnide/todos",parameters:{},searchParameters:{}})}},content:"Todos List"}),i({attributes:{style:a({display:"block",marginLeft:"auto",marginRight:"auto",marginBottom:"30px"}),onclick:()=>{o({path:"/arachnide/compose",parameters:{},searchParameters:{}})}},content:"Docker Compose"}),z({attributes:{style:a({textAlign:"center"})},content:"Get a summary of all of the below informations"}),P({attributes:{class:"grid"},content:[i({attributes:{class:"outline",onclick:()=>{t(()=>({name:"INCREMENT"}))}},content:"Increment"}),i({attributes:{class:"outline",onclick:()=>{t(()=>({name:"DECREMENT"}))}},content:"Decrement"})]}),v({attributes:{for:"steps"},content:" Steps "}),T({attributes:{id:"steps",step:10,type:"number",value:e.steps,oninput:L(n=>{t(()=>({name:"SET_STEPS",data:Number(n)||100}))})}}),q({content:Array.from(Array(e.counter)).map((n,r)=>W({attributes:{},content:`Index #${r}`}))})]}),"/arachnide/summary":({state:e,changePage:t})=>P({attributes:{class:"container"},content:[A({attributes:{style:a({textAlgin:"center"})},content:"Summary"}),z({attributes:{style:a({textAlign:"center"})},content:`Counter is currently at ${e.counter}`}),z({attributes:{style:a({textAlign:"center"})},content:`Steps is currently at ${e.steps}`}),i({attributes:{style:a({display:"block",margin:"0 auto"}),onclick:()=>{t({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]}),"/arachnide/todos":({state:e,update:t})=>P({content:[A({content:"Todos List"}),V({attributes:{style:a({display:"flex",flexDirection:"row",gap:"20px"}),onsubmit:o=>{o.preventDefault(),t(()=>({name:"TODOS_ADD",data:e.todo}))}},content:[T({attributes:{style:a({width:"calc(100% - 100px)"}),type:"text",value:e.todo,oninput:L(o=>{t(()=>({name:"TODO_SET",data:o}))})}}),i({content:"Add",attributes:{style:a({width:"100px"}),type:"submit"}})]}),q({content:e.todos.map((o,n)=>W({content:[te({content:`${n+1}. ${o}`}),i({attributes:{onclick:()=>{t(()=>({name:"TODOS_REMOVE",data:n}))},style:a({marginLeft:"10px"})},content:"Remove"})]}))})]}),"/arachnide/compose":({state:e,update:t,changePage:o})=>P({attributes:{style:a({maxWidth:"1000px",margin:"0 auto"})},content:[i({content:"Back Home",attributes:{style:a({display:"block",marginBottom:"10px"}),onclick:()=>{o({path:"/arachnide",parameters:{},searchParameters:{}})}}}),i({content:"Add service",attributes:{onclick:()=>{t(()=>({name:"COMPOSE_SERVICE_ADD",data:null}))}}}),...e.compose.services.map((n,r)=>P({content:[F({content:[v({content:"Name",attributes:{htmlFor:`service-name-${r}`}}),T({attributes:{id:`service-name-${r}`,value:n.name,oninput:L(s=>{t(()=>({name:"COMPOSE_SERVICE_NAME_SET",data:{name:s,index:r}}))})}})]}),n.image===void 0?i({content:"Image",attributes:{onclick:()=>{t(()=>({name:"COMPOSE_SERVICE_IMAGE_ADD",data:{index:r}}))}}}):"",n.image!==void 0?F({content:[v({attributes:{htmlFor:`service-image-${r}`},content:"Image"}),T({attributes:{id:`service-image-${r}`,value:n.image,oninput:L(s=>{t(()=>({name:"COMPOSE_SERVICE_IMAGE_SET",data:{index:r,image:s}}))})}}),i({content:"Remove",attributes:{onclick:()=>{t(()=>({name:"COMPOSE_SERVICE_IMAGE_REMOVE",data:{index:r}}))}}})]}):"",n.tty===void 0?i({content:"TTY",attributes:{onclick:()=>{t(()=>({name:"COMPOSE_SERVICE_TTY_ADD",data:{index:r}}))}}}):"",n.tty!==void 0?F({content:[v({content:"TTY",attributes:{htmlFor:`service-tty-${r}`}}),T({attributes:{type:"checkbox",checked:n.tty,onclick:()=>{t(()=>({name:"COMPOSE_SERVICE_TTY_TOGGLE",data:{index:r}}))}}}),i({content:"Remove",attributes:{onclick:()=>{t(()=>({name:"COMPOSE_SERVICE_TTY_REMOVE",data:{index:r}}))}}})]}):""]})),ee({content:[X({content:JSON.stringify({...e.compose,services:Object.fromEntries(e.compose.services.map(({name:n,...r})=>[n,r]))},null,2)})]})]}),"*":({changePage:e})=>P({content:[A({content:"Page not found"}),i({attributes:{style:a({display:"block",margin:"0 auto"}),onclick:()=>{e({path:"/arachnide",parameters:{},searchParameters:{}})}},content:"Go back home"})]})}});
